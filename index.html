<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Reading Contest</title>
    
    <!-- 1. å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 2. å¼•å…¥ Babel (è®“ç€è¦½å™¨çœ‹å¾—æ‡‚ JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 3. å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- åœ–ç¤ºå…ƒä»¶ (æ‰‹å‹•å®šç¾©ä»¥å…é™¤ä¾è³´) ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Play = (props) => <Icon {...props}><polygon points="5 3 19 12 5 21 5 3"></polygon></Icon>;
        const Pause = (props) => <Icon {...props}><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></Icon>;
        const Turtle = (props) => <Icon {...props}><path d="m12 10 2 4v3a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-3l2-4h2Z"/><path d="M4.82 7.9 8 10"/><path d="m15.18 7.9-3.18 2.1"/><circle cx="12" cy="6" r="6"/><path d="M11 19h2"/><path d="M8 19h1"/><path d="M15 19h1"/><circle cx="9" cy="19" r="2"/><circle cx="15" cy="19" r="2"/></Icon>;
        const Settings = (props) => <Icon {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></Icon>;
        const ChevronLeft = (props) => <Icon {...props}><polyline points="15 18 9 12 15 6"></polyline></Icon>;
        const Volume2 = (props) => <Icon {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></Icon>;
        const Star = (props) => <Icon {...props} fill={props.fill || "none"}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></Icon>;
        const Mic = (props) => <Icon {...props}><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></Icon>;
        const Square = (props) => <Icon {...props}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></Icon>;
        const PlayCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const Anchor = (props) => <Icon {...props}><circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path></Icon>;
        const Ghost = (props) => <Icon {...props}><path d="M9 22v-2H5v2H2v-8c0-5 4-9 10-9s10 4 10 9v8h-3v-2h-4v2h-3"></path><path d="M9 13a2 2 0 1 0 4 0 2 2 0 1 0-4 0"></path></Icon>;


        // --- è³‡æ–™åº«è¨­å®š (Data) ---
        const CATEGORIES = [
          {
            id: 'cat_mouse',
            title: '1. Cat and Mouse Go Boating',
            subtitle: 'è²“å’Œè€é¼ åˆ’èˆ¹',
            color: 'bg-orange-100',
            textColor: 'text-orange-700',
            borderColor: 'border-orange-200',
            icon: <Anchor size={40} />,
            sentences: [
              { en: "Once upon a time, Cat and Mouse were great friends.", zh: "å¾ˆä¹…ä»¥å‰ï¼Œè²“å’Œè€é¼ æ˜¯å¥½æœ‹å‹ã€‚" },
              { en: "They lived in the rainforest together and were perfectly happy.", zh: "ä»–å€‘ä¸€èµ·ä½åœ¨é›¨æ—è£¡ï¼Œéå¸¸å¿«æ¨‚ã€‚" },
              { en: "Cat mainly ate small birds.", zh: "è²“ä¸»è¦åƒå°é³¥ã€‚" },
              { en: "Mouse mostly enjoyed a kind of sweet potato called taro.", zh: "è€é¼ ä¸»è¦å–œæ­¡åƒä¸€ç¨®å«åšèŠ‹é ­çš„åœ°ç“œã€‚" },
              { en: "One day, Cat became restless.", zh: "æœ‰ä¸€å¤©ï¼Œè²“è®Šå¾—ç„¦èºä¸å®‰ã€‚" },
              { en: "\"Mouse,\" said Cat, \"I think we should leave the forest and find a village to live in.\"", zh: "ã€Œè€é¼ ï¼Œã€è²“èªªï¼Œã€Œæˆ‘èªç‚ºæˆ‘å€‘æ‡‰è©²é›¢é–‹æ£®æ—ï¼Œæ‰¾å€‹æ‘èŠå±…ä½ã€‚ã€" },
              { en: "There will be lots of houses there.", zh: "é‚£è£¡æœƒæœ‰å¾ˆå¤šæˆ¿å­ã€‚" },
              { en: "We'll find plenty of food.", zh: "æˆ‘å€‘æœƒæ‰¾åˆ°å¾ˆå¤šé£Ÿç‰©ã€‚" },
              { en: "Our lives will be much easier.", zh: "æˆ‘å€‘çš„ç”Ÿæ´»æœƒè¼•é¬†å¾—å¤šã€‚" },
              { en: "\"But,\" said Mouse, \"we live on an island. There are no villages.\"", zh: "ã€Œä½†æ˜¯ï¼Œã€è€é¼ èªªï¼Œã€Œæˆ‘å€‘ä½åœ¨å³¶ä¸Šã€‚é€™è£¡æ²’æœ‰æ‘èŠã€‚ã€" },
              { en: "How are we going to reach the mainland?", zh: "æˆ‘å€‘è¦æ€éº¼å»å¤§é™¸å‘¢ï¼Ÿ" },
              { en: "\"We could hollow out a boat from a big taro. What do you think of that?\" said Cat.", zh: "ã€Œæˆ‘å€‘å¯ä»¥æŠŠå¤§èŠ‹é ­æŒ–ç©ºåšæˆä¸€è‰˜èˆ¹ã€‚ä½ è¦ºå¾—æ€éº¼æ¨£ï¼Ÿã€è²“èªªã€‚" },
              { en: "\"I think I'd enjoy making that boat!\" laughed Mouse. And so he did.", zh: "ã€Œæˆ‘æƒ³æˆ‘å¾ˆæ¨‚æ„åšé‚£è‰˜èˆ¹ï¼ã€è€é¼ ç¬‘è‘—èªªã€‚æ–¼æ˜¯ä»–ä¾¿ç…§åšäº†ã€‚" },
              { en: "A week later, Cat and Mouse began their sail.", zh: "ä¸€é€±å¾Œï¼Œè²“å’Œè€é¼ é–‹å§‹èˆªè¡Œã€‚" },
              { en: "Their boat was heavy to paddle.", zh: "ä»–å€‘çš„èˆ¹å¾ˆé›£åˆ’ã€‚" },
              { en: "Before long, Cat and Mouse were very tired.", zh: "æ²’éå¤šä¹…ï¼Œè²“å’Œè€é¼ éƒ½å¾ˆç´¯äº†ã€‚" },
              { en: "They were very far from land. Of course, they were getting hungry, too.", zh: "ä»–å€‘é›¢é™¸åœ°å¾ˆé ã€‚ç•¶ç„¶ï¼Œä»–å€‘ä¹Ÿé¤“äº†ã€‚" },
              { en: "One night, while Cat was sleeping, Mouse started to nibble the taro boat.", zh: "æœ‰ä¸€å¤©æ™šä¸Šï¼Œç•¶è²“åœ¨ç¡è¦ºæ™‚ï¼Œè€é¼ é–‹å§‹å•ƒèŠ‹é ­èˆ¹ã€‚" },
              { en: "Just a little nibble couldn't hurt.", zh: "åªå•ƒä¸€å°å£æ‡‰è©²æ²’é—œä¿‚ã€‚" },
              { en: "But one little nibble turned into a lot of big nibbles.", zh: "ä½†æ˜¯ä¸€å°å£è®Šæˆäº†ä¸€å¤§å †å¤§å£ã€‚" },
              { en: "Before Mouse knew it, the boat began to leak. At once, Cat woke up.", zh: "è€é¼ é‚„æ²’æ„è­˜åˆ°ï¼Œèˆ¹å°±é–‹å§‹æ¼æ°´äº†ã€‚è²“ç«‹åˆ»é†’äº†éä¾†ã€‚" },
              { en: "\"Mouse, I know what you did. When we reach land, I'm going to eat you!\" he cried.", zh: "ã€Œè€é¼ ï¼Œæˆ‘çŸ¥é“ä½ åšäº†ä»€éº¼ã€‚ç­‰æˆ‘å€‘åˆ°äº†é™¸åœ°ï¼Œæˆ‘å°±è¦åƒæ‰ä½ ï¼ã€ä»–å¤§å«ã€‚" },
              { en: "Mouse and Cat were thrown into the sea and had to swim to land.", zh: "è€é¼ å’Œè²“è¢«æ‹‹é€²æµ·è£¡ï¼Œä¸å¾—ä¸æ¸¸å‘é™¸åœ°ã€‚" },
              { en: "Once on shore, Cat looked hungrily at Mouse.", zh: "ä¸€ä¸Šå²¸ï¼Œè²“å°±é£¢æ¸´åœ°çœ‹è‘—è€é¼ ã€‚" },
              { en: "But Mouse told him to wait.", zh: "ä½†æ˜¯è€é¼ å«ä»–ç­‰ç­‰ã€‚" },
              { en: "\"I'm very dirty and salty,\" he said.", zh: "ã€Œæˆ‘åˆé«’åˆé¹¹ï¼Œã€ä»–èªªã€‚" },
              { en: "\"Let me just give myself a wash before you eat me.\"", zh: "ã€Œåœ¨ä½ åƒæˆ‘ä¹‹å‰ï¼Œè®“æˆ‘å…ˆæ´—å€‹æ¾¡ã€‚ã€" },
              { en: "\"Here's a little hole where I can do it.\"", zh: "ã€Œé€™è£¡æœ‰å€‹å°æ´ï¼Œæˆ‘å¯ä»¥åœ¨é€™è£¡æ´—ã€‚ã€" },
              { en: "Mouse disappeared... and did not reappear. He dug a little tunnel and escaped.", zh: "è€é¼ æ¶ˆå¤±äº†â€¦â€¦è€Œä¸”æ²’æœ‰å†å‡ºç¾ã€‚ä»–æŒ–äº†ä¸€æ¢å°éš§é“é€ƒè·‘äº†ã€‚" },
              { en: "So, you can understand why Cat and Mouse are no longer such great friends!", zh: "æ‰€ä»¥ï¼Œä½ å¯ä»¥ç†è§£ç‚ºä»€éº¼è²“å’Œè€é¼ ä¸å†æ˜¯å¥½æœ‹å‹äº†ï¼" }
            ]
          },
          {
            id: 'old_man_bear',
            title: '2. The Old Man and the Bear',
            subtitle: 'è€äººèˆ‡ç†Š',
            color: 'bg-emerald-100',
            textColor: 'text-emerald-800',
            borderColor: 'border-emerald-200',
            icon: <BookOpen size={40} />,
            sentences: [
              { en: "Once an old man went to sow some turnip seeds.", zh: "å¾å‰æœ‰å€‹è€äººå»ç¨®ä¸€äº›è•ªèç¨®å­ã€‚" },
              { en: "He worked hard all day but just as he was about to cast his seeds on to the tilled ground, a huge bear rushed out of the forest, growling furiously.", zh: "ä»–æ•´å¤©è¾›å‹¤å·¥ä½œï¼Œä½†æ­£ç•¶ä»–è¦æŠŠç¨®å­æ’’åœ¨è€•å¥½çš„åœ°ä¸Šæ™‚ï¼Œä¸€éš»å·¨å¤§çš„ç†Šå¾æ£®æ—è£¡è¡äº†å‡ºä¾†ï¼Œæ†¤æ€’åœ°å’†å“®è‘—ã€‚" },
              { en: "\"Don't hurt me! Don't hurt me!\" cried the old man.", zh: "ã€Œä¸è¦å‚·å®³æˆ‘ï¼ä¸è¦å‚·å®³æˆ‘ï¼ã€è€äººå¤§å«ã€‚" },
              { en: "\"Give me one good reason why not,\" said the bear.", zh: "ã€Œçµ¦æˆ‘ä¸€å€‹ä¸å‚·å®³ä½ çš„å¥½ç†ç”±ï¼Œã€ç†Šèªªã€‚" },
              { en: "The old man said quickly, \"If you help me to sow these seeds, we will have a wonderful harvest.\"", zh: "è€äººé€£å¿™èªªï¼šã€Œå¦‚æœä½ å¹«æˆ‘ç¨®é€™äº›ç¨®å­ï¼Œæˆ‘å€‘æœƒæœ‰å¤§è±æ”¶ã€‚ã€" },
              { en: "\"Then, you can have all the green tops and I will take the roots.\"", zh: "ã€Œåˆ°æ™‚å€™ï¼Œæ‰€æœ‰çš„ç¶ è‘‰éƒ½æ­¸ä½ ï¼Œæˆ‘åªè¦æ ¹ã€‚ã€" },
              { en: "The bear agreed.", zh: "ç†ŠåŒæ„äº†ã€‚" },
              { en: "When the time came to harvest the turnips, the old man filled his cart with the roots. He gave the tops to the bear.", zh: "ç•¶æ”¶æˆè•ªèçš„æ™‚å€™åˆ°äº†ï¼Œè€äººæŠŠè»Šè£æ»¿äº†æ ¹ã€‚ä»–æŠŠè‘‰å­çµ¦äº†ç†Šã€‚" },
              { en: "The bear ate the tops. Just as the old man was ready to set out for the city to sell his turnips, the bear began to wonder.", zh: "ç†Šåƒäº†è‘‰å­ã€‚æ­£ç•¶è€äººæº–å‚™å‡ºç™¼å»åŸè£¡è³£è•ªèæ™‚ï¼Œç†Šé–‹å§‹æ‡·ç–‘äº†ã€‚" },
              { en: "\"Let me just taste one of those roots,\" he said.", zh: "ã€Œè®“æˆ‘åšåšå…¶ä¸­ä¸€å€‹æ ¹ï¼Œã€ä»–èªªã€‚" },
              { en: "Well, the moment the bear tasted the turnips, he roared with anger.", zh: "å—¯ï¼Œç†Šä¸€åšåˆ°è•ªèï¼Œå°±æ†¤æ€’åœ°å¤§å¼ã€‚" },
              { en: "\"You tricked me!\" he cried. \"These roots are the best part of the plant.\"", zh: "ã€Œä½ é¨™æˆ‘ï¼ã€ä»–å¤§å«ã€‚ã€Œé€™äº›æ ¹æ˜¯æ¤ç‰©æœ€å¥½åƒçš„éƒ¨åˆ†ã€‚ã€" },
              { en: "The following year, the old man thought it would be better not to risk a turnip crop, so he planted rye instead.", zh: "ç¬¬äºŒå¹´ï¼Œè€äººè¦ºå¾—æœ€å¥½ä¸è¦å†’éšªç¨®è•ªèï¼Œæ‰€ä»¥ä»–æ”¹ç¨®é»‘éº¥ã€‚" },
              { en: "A fine field of the grain grew in the summer sun.", zh: "å¤æ—¥çš„é™½å…‰ä¸‹é•·å‡ºäº†ä¸€ç‰‡ç¾å¥½çš„ç©€ç‰©ã€‚" },
              { en: "Then, just as the old man prepared to cut the rye, the bear came rushing out of the trees again.", zh: "ç„¶å¾Œï¼Œæ­£ç•¶è€äººæº–å‚™æ”¶å‰²é»‘éº¥æ™‚ï¼Œç†Šåˆå¾æ¨¹æ—è£¡è¡äº†å‡ºä¾†ã€‚" },
              { en: "\"Old man!\" he yelled. \"This time I will not be fooled. Share your crop with me!\"", zh: "ã€Œè€äººï¼ã€ä»–å¤§å¼ã€‚ã€Œé€™æ¬¡æˆ‘ä¸æœƒå†ä¸Šç•¶äº†ã€‚æŠŠä½ çš„ä½œç‰©åˆ†çµ¦æˆ‘ï¼ã€" },
              { en: "\"It will be a great pleasure,\" said the old man.", zh: "ã€Œæˆ‘å¾ˆæ¨‚æ„ï¼Œã€è€äººèªªã€‚" },
              { en: "\"And this time, good bear, I will take the tops and you can have the roots.\"", zh: "ã€Œé€™æ¬¡ï¼Œå¥½ç†Šï¼Œæˆ‘è¦è‘‰å­ï¼Œä½ å¯ä»¥æ‹¿æ ¹ã€‚ã€" },
              { en: "Well, the bear took the roots and carried them back into the forest.", zh: "å—¯ï¼Œç†Šæ‹¿äº†æ ¹ï¼ŒæŠŠå®ƒå€‘å¸¶å›äº†æ£®æ—ã€‚" },
              { en: "When he tried to chew them, he threw them out. This was no kind of food.", zh: "ç•¶ä»–è©¦è‘—å’€åš¼æ™‚ï¼Œä»–æŠŠå®ƒå€‘åäº†å‡ºä¾†ã€‚é€™æ ¹æœ¬ä¸æ˜¯é£Ÿç‰©ã€‚" },
              { en: "When the bear realized he had been tricked, he snarled and rolled his eyes.", zh: "ç•¶ç†Šæ„è­˜åˆ°è‡ªå·±è¢«é¨™æ™‚ï¼Œä»–å’†å“®è‘—ç¿»äº†ç™½çœ¼ã€‚" },
              { en: "From that day to this, bears and men have never been friends.", zh: "å¾é‚£å¤©èµ·ç›´åˆ°ç¾åœ¨ï¼Œç†Šå’Œäººå¾ä¾†å°±ä¸æ˜¯æœ‹å‹ã€‚" }
            ]
          },
          {
            id: 'shadow_library',
            title: '3. The Shadow in the Library',
            subtitle: 'åœ–æ›¸é¤¨è£¡çš„å½±å­',
            color: 'bg-purple-100',
            textColor: 'text-purple-700',
            borderColor: 'border-purple-200',
            icon: <Ghost size={40} />,
            sentences: [
              { en: "It was a rainy Friday afternoon.", zh: "é€™æ˜¯ä¸€å€‹ä¸‹é›¨çš„æ˜ŸæœŸäº”ä¸‹åˆã€‚" },
              { en: "The school was empty, but Mia stayed behind to find a book for her history project.", zh: "å­¸æ ¡è£¡ç©ºç„¡ä¸€äººï¼Œä½†ç±³äºç•™ä¸‹ä¾†æ‰¾ä¸€æœ¬æ­·å²ä½œæ¥­ç”¨çš„æ›¸ã€‚" },
              { en: "Drip... drip... drip. The rain tapped on the windows.", zh: "æ»´ç­”â€¦â€¦æ»´ç­”â€¦â€¦æ»´ç­”ã€‚é›¨æ°´æ•²æ‰“è‘—çª—æˆ¶ã€‚" },
              { en: "The library was so quiet that Mia could hear her own heartbeat.", zh: "åœ–æ›¸é¤¨å®‰éœå¾—é€£ç±³äºéƒ½èƒ½è½è¦‹è‡ªå·±çš„å¿ƒè·³è²ã€‚" },
              { en: "Suddenly, BANG! A heavy book fell from the highest shelf!", zh: "çªç„¶ï¼Œã€Œç °ã€çš„ä¸€è²ï¼ä¸€æœ¬åšé‡çš„æ›¸å¾æœ€é«˜çš„æ›¸æ¶ä¸Šæ‰ä¸‹ä¾†ï¼" },
              { en: "Mia gasped. \"Who's there?\"", zh: "ç±³äºå€’æŠ½ä¸€å£æ°£ã€‚ã€Œèª°åœ¨é‚£è£¡ï¼Ÿã€" },
              { en: "No one answered.", zh: "æ²’æœ‰äººå›ç­”ã€‚" },
              { en: "But from the corner of her eye, she saw a shadow move between the shelves.", zh: "ä½†åœ¨çœ¼è§’é¤˜å…‰ä¸­ï¼Œå¥¹çœ‹è¦‹ä¸€å€‹å½±å­åœ¨æ›¸æ¶é–“ç§»å‹•ã€‚" },
              { en: "Mia wanted to run, but her feet felt frozen.", zh: "ç±³äºæƒ³è·‘ï¼Œä½†å¥¹çš„é›™è…³åƒå‡åƒµäº†ä¸€æ¨£å‹•å½ˆä¸å¾—ã€‚" },
              { en: "She took a deep breath and said, \"If there's someone here... show yourself!\"", zh: "å¥¹æ·±å¸ä¸€å£æ°£èªªï¼šã€Œå¦‚æœæœ‰äººåœ¨é€™è£¡â€¦â€¦ç¾èº«å§ï¼ã€" },
              { en: "Slowly, a small, glowing figure stepped out.", zh: "æ…¢æ…¢åœ°ï¼Œä¸€å€‹ç™¼å…‰çš„å°èº«å½±èµ°äº†å‡ºä¾†ã€‚" },
              { en: "It was not a person. It was an elf, holding an old, dusty magic paper.", zh: "é‚£ä¸æ˜¯äººã€‚é‚£æ˜¯ä¸€å€‹ç²¾éˆï¼Œæ‰‹è£¡æ‹¿è‘—ä¸€å¼µå¤è€ã€ä½ˆæ»¿ç°å¡µçš„é­”æ³•ç´™ã€‚" },
              { en: "\"Don't be afraid,\" said the elf softly.", zh: "ã€Œåˆ¥å®³æ€•ï¼Œã€ç²¾éˆè¼•è²èªªã€‚" },
              { en: "\"This library is in danger. If you don't save it, all the books will turn to dust by midnight!\"", zh: "ã€Œé€™åº§åœ–æ›¸é¤¨æœ‰å±éšªã€‚å¦‚æœä½ ä¸æ‹¯æ•‘å®ƒï¼Œåˆå¤œæ™‚åˆ†æ‰€æœ‰çš„æ›¸éƒ½æœƒè®Šæˆç°å¡µï¼ã€" },
              { en: "Mia was shocked. \"How can I save it?\"", zh: "ç±³äºå¾ˆé©šè¨ã€‚ã€Œæˆ‘è©²æ€éº¼æ•‘å®ƒï¼Ÿã€" },
              { en: "\"You must place this magic paper on the shiny table in the secret reading room before the last stroke of twelve.\"", zh: "ã€Œä½ å¿…é ˆåœ¨åäºŒé»é˜éŸ¿æœ€å¾Œä¸€è²ä¹‹å‰ï¼ŒæŠŠé€™å¼µé­”æ³•ç´™æ”¾åœ¨ç§˜å¯†é–±è¦½å®¤çš„é‚£å¼µé–ƒäº®çš„æ¡Œå­ä¸Šã€‚ã€" },
              { en: "Mia grabbed the magic paper and ran.", zh: "ç±³äºæŠ“èµ·é­”æ³•ç´™è·‘äº†èµ·ä¾†ã€‚" },
              { en: "The lights flickered. The clock ticked louder and louder. Tick... tock... tick... tock...", zh: "ç‡ˆå…‰é–ƒçˆã€‚æ™‚é˜çš„æ»´ç­”è²è¶Šä¾†è¶Šå¤§ã€‚æ»´â€¦â€¦ç­”â€¦â€¦æ»´â€¦â€¦ç­”â€¦â€¦" },
              { en: "Finally, she found the shiny table.", zh: "çµ‚æ–¼ï¼Œå¥¹æ‰¾åˆ°äº†é‚£å¼µé–ƒäº®çš„æ¡Œå­ã€‚" },
              { en: "But just as she was about to put the magic paper down, a strong wind blew the windows open!", zh: "ä½†å°±åœ¨å¥¹æ­£è¦æŠŠé­”æ³•ç´™æ”¾ä¸‹çš„æ™‚å€™ï¼Œä¸€é™£å¼·é¢¨æŠŠçª—æˆ¶å¹é–‹äº†ï¼" },
              { en: "Whoosh! The magic paper flew into the air.", zh: "å‘¼ï¼é­”æ³•ç´™é£›åˆ°äº†ç©ºä¸­ã€‚" },
              { en: "\"No!\" Mia shouted. She jumped and caught it just in time.", zh: "ã€Œä¸ï¼ã€ç±³äºå¤§å«ã€‚å¥¹è·³èµ·ä¾†ï¼ŒåŠæ™‚æ¥ä½äº†å®ƒã€‚" },
              { en: "With shaking hands, she placed it on the magic table.", zh: "å¥¹é¡«æŠ–è‘—é›™æ‰‹ï¼ŒæŠŠå®ƒæ”¾åœ¨é­”æ³•æ¡Œä¸Šã€‚" },
              { en: "The library glowed with warm, golden light.", zh: "åœ–æ›¸é¤¨ç™¼å‡ºæº«æš–çš„é‡‘å…‰ã€‚" },
              { en: "The elf smiled. \"You saved the library. Thank you, Mia.\"", zh: "ç²¾éˆå¾®ç¬‘äº†ã€‚ã€Œä½ æ‹¯æ•‘äº†åœ–æ›¸é¤¨ã€‚è¬è¬å¦³ï¼Œç±³äºã€‚ã€" },
              { en: "In a second, the elf disappeared. The rain stopped.", zh: "è½‰çœ¼é–“ï¼Œç²¾éˆæ¶ˆå¤±äº†ã€‚é›¨åœäº†ã€‚" },
              { en: "Everything was quiet again.", zh: "ä¸€åˆ‡åˆæ¢å¾©äº†å¹³éœã€‚" },
              { en: "Mia looked around and whispered, \"That was the most exciting homework ever.\"", zh: "ç±³äºç’°é¡§å››å‘¨ï¼Œä½è²èªªï¼šã€Œé€™æ˜¯æœ‰å²ä»¥ä¾†æœ€åˆºæ¿€çš„å®¶åº­ä½œæ¥­äº†ã€‚ã€" }
            ]
          }
        ];

        // --- App å…ƒä»¶ ---

        function App() {
          const [currentCategory, setCurrentCategory] = useState(null);
          const [speechRate, setSpeechRate] = useState(1.0);
          const [speakingId, setSpeakingId] = useState(null);
          const [voices, setVoices] = useState([]);
          const [recordings, setRecordings] = useState({});
          const [recordingIndex, setRecordingIndex] = useState(null);
          const [playingRecordIndex, setPlayingRecordIndex] = useState(null);
          
          const mediaRecorderRef = useRef(null);
          const chunksRef = useRef([]);
          const recordAudioRef = useRef(null);

          useEffect(() => {
            const loadVoices = () => {
              const availableVoices = window.speechSynthesis.getVoices();
              setVoices(availableVoices);
            };
            
            loadVoices();
            window.speechSynthesis.onvoiceschanged = loadVoices;
          }, []);

          const speak = (text, speed, index) => {
            stopEverything();
            setSpeakingId(index);

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = speed;
            utterance.lang = 'en-US';
            
            const preferredVoice = voices.find(v => v.name.includes('Google US English')) || 
                                  voices.find(v => v.lang === 'en-US');
            if (preferredVoice) utterance.voice = preferredVoice;

            utterance.onend = () => {
              setSpeakingId(null);
            };

            window.speechSynthesis.speak(utterance);
          };

          const startRecording = async (index) => {
            stopEverything();

            try {
              const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
              mediaRecorderRef.current = new MediaRecorder(stream);
              chunksRef.current = [];

              mediaRecorderRef.current.ondataavailable = (e) => {
                if (e.data.size > 0) chunksRef.current.push(e.data);
              };

              mediaRecorderRef.current.onstop = () => {
                const blob = new Blob(chunksRef.current, { type: 'audio/webm' });
                const url = URL.createObjectURL(blob);
                setRecordings(prev => ({ ...prev, [index]: url }));
                stream.getTracks().forEach(track => track.stop());
              };

              mediaRecorderRef.current.start();
              setRecordingIndex(index);
            } catch (err) {
              console.error("Error accessing microphone:", err);
              alert("ç„¡æ³•å­˜å–éº¥å…‹é¢¨ï¼Œè«‹ç¢ºèªç€è¦½å™¨æ¬Šé™è¨­å®šã€‚");
            }
          };

          const stopRecording = () => {
            if (mediaRecorderRef.current && recordingIndex !== null) {
              mediaRecorderRef.current.stop();
              setRecordingIndex(null);
            }
          };

          const playRecording = (index) => {
            stopEverything();
            
            const audioUrl = recordings[index];
            if (audioUrl) {
              setPlayingRecordIndex(index);
              if (recordAudioRef.current) {
                recordAudioRef.current.pause();
              }
              recordAudioRef.current = new Audio(audioUrl);
              recordAudioRef.current.onended = () => setPlayingRecordIndex(null);
              recordAudioRef.current.play();
            }
          };

          const stopEverything = () => {
            window.speechSynthesis.cancel();
            setSpeakingId(null);
            if (recordingIndex !== null) stopRecording();
            if (recordAudioRef.current) {
              recordAudioRef.current.pause();
              setPlayingRecordIndex(null);
            }
          };

          return (
            <div className="min-h-screen bg-slate-50 font-sans text-slate-800 selection:bg-sky-200 pb-20">
              <header className="bg-white shadow-sm sticky top-0 z-20 border-b border-slate-200">
                <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                  <div className="flex items-center gap-3">
                    {currentCategory && (
                      <button 
                        onClick={() => {
                          stopEverything();
                          setCurrentCategory(null);
                          setRecordings({});
                        }}
                        className="p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500"
                      >
                        <ChevronLeft size={28} />
                      </button>
                    )}
                    <div className="flex items-center gap-2">
                      <div className="bg-sky-500 text-white p-1.5 rounded-lg">
                        <Star size={20} fill="white" />
                      </div>
                      <h1 className="text-xl md:text-2xl font-bold text-slate-700 tracking-tight">
                        English <span className="text-sky-500">Contest</span>
                      </h1>
                    </div>
                  </div>
                  
                  {currentCategory && (
                    <div className="hidden md:flex items-center gap-3 bg-slate-100 px-4 py-1.5 rounded-full">
                      <Settings size={16} className="text-slate-400" />
                      <span className="text-sm font-bold text-slate-500">Speed: {speechRate}x</span>
                      <input
                        type="range"
                        min="0.5"
                        max="1.5"
                        step="0.1"
                        value={speechRate}
                        onChange={(e) => setSpeechRate(parseFloat(e.target.value))}
                        className="w-24 accent-sky-500 cursor-pointer"
                      />
                    </div>
                  )}
                </div>
              </header>

              <main className="max-w-4xl mx-auto p-4 md:p-6">
                {!currentCategory ? (
                  <div className="animate-fade-in">
                    <div className="text-center mb-8 mt-4">
                      <h2 className="text-3xl font-bold text-slate-800 mb-2">Reading Contest ğŸ†</h2>
                      <p className="text-slate-500">æ¡ƒåœ’å¸‚ 114 å¹´åº¦è‹±èªæ¯”è³½é¡Œç›®</p>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto">
                      {CATEGORIES.map((cat) => (
                        <button
                          key={cat.id}
                          onClick={() => setCurrentCategory(cat)}
                          className={`
                            relative group overflow-hidden rounded-3xl p-8 text-left transition-all duration-300
                            hover:shadow-xl hover:-translate-y-1 border-2 ${cat.borderColor} ${cat.color}
                          `}
                        >
                          <div className={`
                            absolute -right-6 -bottom-6 opacity-20 group-hover:scale-110 transition-transform duration-500
                            ${cat.textColor}
                          `}>
                            {React.cloneElement(cat.icon, { size: 140 })}
                          </div>
                          
                          <div className={`${cat.textColor} mb-4 bg-white/60 w-fit p-3 rounded-2xl backdrop-blur-sm`}>
                            {cat.icon}
                          </div>
                          <h3 className={`text-2xl font-bold ${cat.textColor} mb-2`}>{cat.title}</h3>
                          <p className="text-slate-700 font-medium opacity-80 text-lg">{cat.subtitle}</p>
                        </button>
                      ))}
                    </div>
                  </div>
                ) : (
                  <div className="animate-fade-in">
                    <div className={`
                      rounded-3xl p-6 mb-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4
                      ${currentCategory.color} ${currentCategory.textColor} shadow-sm
                    `}>
                      <div className="flex items-center gap-4">
                        <div className="bg-white/50 p-3 rounded-2xl backdrop-blur-sm">
                          {currentCategory.icon}
                        </div>
                        <div>
                          <h2 className="text-2xl md:text-3xl font-bold leading-tight">{currentCategory.title}</h2>
                          <p className="opacity-80 font-medium text-lg">{currentCategory.subtitle}</p>
                        </div>
                      </div>

                      <div className="md:hidden w-full bg-white/40 p-3 rounded-xl backdrop-blur-sm flex items-center justify-between gap-2">
                        <span className="text-sm font-bold">èªé€Ÿ {speechRate}x</span>
                        <input
                          type="range"
                          min="0.5"
                          max="1.5"
                          step="0.1"
                          value={speechRate}
                          onChange={(e) => setSpeechRate(parseFloat(e.target.value))}
                          className="flex-1 accent-current cursor-pointer"
                        />
                      </div>
                    </div>

                    <div className="space-y-4">
                      {currentCategory.sentences.map((item, index) => {
                        const isSpeaking = speakingId === index;
                        const isRecordingThis = recordingIndex === index;
                        const isPlayingRecord = playingRecordIndex === index;
                        const hasRecording = recordings[index];
                        
                        return (
                          <div 
                            key={index}
                            className={`
                              bg-white rounded-2xl p-4 md:p-5 border-2 transition-all duration-300
                              ${(isSpeaking || isRecordingThis || isPlayingRecord)
                                ? 'border-sky-400 shadow-md scale-[1.01] ring-4 ring-sky-100' 
                                : 'border-slate-100 hover:border-sky-200 hover:shadow-sm'
                              }
                            `}
                          >
                            <div className="flex flex-col gap-4">
                              <div>
                                <p className={`
                                  text-xl md:text-2xl font-bold mb-2 leading-relaxed
                                  ${isSpeaking ? 'text-sky-600' : 'text-slate-700'}
                                `}>
                                  {item.en}
                                </p>
                                <p className="text-slate-500 font-medium text-lg">
                                  {item.zh}
                                </p>
                              </div>

                              <div className="flex flex-wrap items-center gap-2 pt-2 border-t border-slate-100 mt-2">
                                
                                <div className="flex items-center gap-2 mr-auto">
                                  <button
                                    onClick={() => speak(item.en, 0.6, index)}
                                    className="
                                      flex items-center gap-1 px-3 py-2 rounded-xl
                                      bg-green-100 text-green-700 hover:bg-green-200
                                      font-bold text-sm transition-colors
                                    "
                                    title="æ…¢é€Ÿæ’­æ”¾ (0.6x)"
                                  >
                                    <Turtle size={18} />
                                    <span className="hidden sm:inline">Slow</span>
                                  </button>

                                  <button
                                    onClick={() => {
                                      if (isSpeaking) {
                                        stopEverything();
                                      } else {
                                        speak(item.en, speechRate, index);
                                      }
                                    }}
                                    className={`
                                      flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-white
                                      transition-all shadow-sm active:scale-95
                                      ${isSpeaking ? 'bg-sky-400 animate-pulse' : 'bg-sky-500 hover:bg-sky-600'}
                                    `}
                                  >
                                    {isSpeaking ? <Pause size={20} /> : <Volume2 size={20} />}
                                    <span className="hidden sm:inline">{isSpeaking ? 'Stop' : 'Listen'}</span>
                                  </button>
                                </div>

                                <div className="flex items-center gap-2 pl-2 border-l border-slate-200">
                                  <button
                                    onClick={() => {
                                      if (isRecordingThis) {
                                        stopRecording();
                                      } else {
                                        startRecording(index);
                                      }
                                    }}
                                    className={`
                                      flex items-center gap-2 px-3 py-2 rounded-xl font-bold transition-all
                                      ${isRecordingThis 
                                        ? 'bg-red-500 text-white animate-pulse shadow-red-200 shadow-lg' 
                                        : 'bg-slate-100 text-slate-600 hover:bg-red-100 hover:text-red-600'}
                                    `}
                                    title="éŒ„éŸ³ / åœæ­¢"
                                  >
                                    {isRecordingThis ? <Square size={20} /> : <Mic size={20} />}
                                    <span className="hidden sm:inline">{isRecordingThis ? 'éŒ„éŸ³ä¸­...' : 'éŒ„éŸ³'}</span>
                                  </button>

                                  {hasRecording && (
                                    <button
                                      onClick={() => {
                                        if (isPlayingRecord) {
                                          stopEverything();
                                        } else {
                                          playRecording(index);
                                        }
                                      }}
                                      className={`
                                        flex items-center gap-2 px-3 py-2 rounded-xl font-bold transition-all
                                        ${isPlayingRecord
                                          ? 'bg-purple-500 text-white' 
                                          : 'bg-purple-100 text-purple-700 hover:bg-purple-200'}
                                      `}
                                      title="æ’­æ”¾æˆ‘çš„éŒ„éŸ³"
                                    >
                                      {isPlayingRecord ? <Pause size={20} /> : <PlayCircle size={20} />}
                                      <span className="hidden sm:inline">My Voice</span>
                                    </button>
                                  )}
                                </div>
                              </div>
                            </div>
                          </div>
                        );
                      })}
                    </div>

                    <div className="text-center mt-12 mb-8 text-slate-400 text-sm">
                      <p>Keep practicing every day! ğŸŒŸ</p>
                    </div>
                  </div>
                )}
              </main>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>